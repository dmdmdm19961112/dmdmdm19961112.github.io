<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">


























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=6.7.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.7.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.7.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.7.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="ArrayList详解ArrayList介绍ArrayList 是一个数组队列，相当于 动态数组。与Java中的数组相比，它的容量能动态增长。它继承于AbstractList，实现了List, RandomAccess, Cloneable, java.io.Serializable这些接口。 ArrayList 继承了AbstractList，实现了List。它是一个数组队列，提供了相关的添加、">
<meta property="og:type" content="article">
<meta property="og:title" content="ArrayList与LinkedList详解">
<meta property="og:url" content="http://yoursite.com/2019/01/12/ArrayList与LinkedList/index.html">
<meta property="og:site_name" content="sleepyhead沉思录">
<meta property="og:description" content="ArrayList详解ArrayList介绍ArrayList 是一个数组队列，相当于 动态数组。与Java中的数组相比，它的容量能动态增长。它继承于AbstractList，实现了List, RandomAccess, Cloneable, java.io.Serializable这些接口。 ArrayList 继承了AbstractList，实现了List。它是一个数组队列，提供了相关的添加、">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-03-22T13:44:18.847Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ArrayList与LinkedList详解">
<meta name="twitter:description" content="ArrayList详解ArrayList介绍ArrayList 是一个数组队列，相当于 动态数组。与Java中的数组相比，它的容量能动态增长。它继承于AbstractList，实现了List, RandomAccess, Cloneable, java.io.Serializable这些接口。 ArrayList 继承了AbstractList，实现了List。它是一个数组队列，提供了相关的添加、">






  <link rel="canonical" href="http://yoursite.com/2019/01/12/ArrayList与LinkedList/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>ArrayList与LinkedList详解 | sleepyhead沉思录</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">sleepyhead沉思录</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">繁荣昌盛，生生不息</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archives"></i> <br>归档</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/12/ArrayList与LinkedList/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="段铭">
      <meta itemprop="description" content="编程随想">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="sleepyhead沉思录">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">ArrayList与LinkedList详解

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-01-12 19:47:30" itemprop="dateCreated datePublished" datetime="2019-01-12T19:47:30+08:00">2019-01-12</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-03-22 21:44:18" itemprop="dateModified" datetime="2019-03-22T21:44:18+08:00">2019-03-22</time>
              
            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/01/12/ArrayList与LinkedList/#comments" itemprop="discussionUrl">
                
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/01/12/ArrayList与LinkedList/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="ArrayList详解"><a href="#ArrayList详解" class="headerlink" title="ArrayList详解"></a>ArrayList详解</h1><h2 id="ArrayList介绍"><a href="#ArrayList介绍" class="headerlink" title="ArrayList介绍"></a>ArrayList介绍</h2><p>ArrayList 是一个<strong>数组队列</strong>，相当于 <strong>动态数组</strong>。与Java中的数组相比，它的容量能动态增长。它继承于AbstractList，实现了List, RandomAccess, Cloneable, java.io.Serializable这些接口。</p>
<p>ArrayList 继承了AbstractList，实现了List。它是一个数组队列，提供了相关的添加、删除、修改、遍历等功能。<br>ArrayList 实现了RandmoAccess接口，即提供了<strong>随机访问功能</strong>。RandmoAccess是java中用来被List实现，为List提供快速访问功能的。在ArrayList中，我们即可以通过元素的序号快速获取元素对象；这就是快速随机访问。稍后，我们会比较List的“快速随机访问”和“通过Iterator迭代器访问”的效率。</p>
<p>ArrayList 实现了Cloneable接口，即覆盖了函数clone()，能被克隆。</p>
<p>ArrayList 实现java.io.Serializable接口，这意味着ArrayList支持序列化，能通过序列化去传输。</p>
<p>和Vector不同，<strong>ArrayList中的操作不是线程安全的</strong>！所以，建议在单线程中才使用ArrayList，而在多线程中可以选择Vector或者CopyOnWriteArrayList。</p>
<p> 下面看看ArrayList的构造函数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 默认构造函数</span><br><span class="line">ArrayList()</span><br><span class="line"></span><br><span class="line">// capacity是ArrayList的默认容量大小。当由于增加数据导致容量不足时，容量会添加上一次容量大小的一半。</span><br><span class="line">ArrayList(int capacity)</span><br><span class="line"></span><br><span class="line">// 创建一个包含collection的ArrayList</span><br><span class="line">ArrayList(Collection&lt;? extends E&gt; collection)</span><br></pre></td></tr></table></figure>
<p>ArrayList的API：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">// Collection中定义的API</span><br><span class="line">boolean             add(E object)</span><br><span class="line">boolean             addAll(Collection&lt;? extends E&gt; collection)</span><br><span class="line">void                clear()</span><br><span class="line">boolean             contains(Object object)</span><br><span class="line">boolean             containsAll(Collection&lt;?&gt; collection)</span><br><span class="line">boolean             equals(Object object)</span><br><span class="line">int                 hashCode()</span><br><span class="line">boolean             isEmpty()</span><br><span class="line">Iterator&lt;E&gt;         iterator()</span><br><span class="line">boolean             remove(Object object)</span><br><span class="line">boolean             removeAll(Collection&lt;?&gt; collection)</span><br><span class="line">boolean             retainAll(Collection&lt;?&gt; collection)</span><br><span class="line">int                 size()</span><br><span class="line">&lt;T&gt; T[]             toArray(T[] array)</span><br><span class="line">Object[]            toArray()</span><br><span class="line">// AbstractCollection中定义的API</span><br><span class="line">void                add(int location, E object)</span><br><span class="line">boolean             addAll(int location, Collection&lt;? extends E&gt; collection)</span><br><span class="line">E                   get(int location)</span><br><span class="line">int                 indexOf(Object object)</span><br><span class="line">int                 lastIndexOf(Object object)</span><br><span class="line">ListIterator&lt;E&gt;     listIterator(int location)</span><br><span class="line">ListIterator&lt;E&gt;     listIterator()</span><br><span class="line">E                   remove(int location)</span><br><span class="line">E                   set(int location, E object)</span><br><span class="line">List&lt;E&gt;             subList(int start, int end)</span><br><span class="line">// ArrayList新增的API</span><br><span class="line">Object               clone()</span><br><span class="line">void                 ensureCapacity(int minimumCapacity)</span><br><span class="line">void                 trimToSize()</span><br><span class="line">void                 removeRange(int fromIndex, int toIndex)</span><br></pre></td></tr></table></figure>
<h2 id="ArrayList内部数据结构"><a href="#ArrayList内部数据结构" class="headerlink" title="ArrayList内部数据结构"></a>ArrayList内部数据结构</h2><p>ArrayList包含了两个重要的对象：elementData 和 size。</p>
<p>(1) elementData 是”Object[]类型的数组”，它保存了添加到ArrayList中的元素。实际上，elementData是个动态数组，我们能通过构造函数 ArrayList(int initialCapacity)来执行它的初始容量为initialCapacity；如果通过不含参数的构造函数ArrayList()来创建ArrayList，则elementData的容量默认是10。elementData数组的大小会根据ArrayList容量的增长而动态的增长，具体的增长方式，请参考源码分析中的ensureCapacity()函数。</p>
<p>(2) size 则是动态数组的实际大小。</p>
<h2 id="ArrayList源码解析"><a href="#ArrayList源码解析" class="headerlink" title="ArrayList源码解析"></a>ArrayList源码解析</h2><p>ArrayList通过数组实现，源码比较容易理解</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br></pre></td><td class="code"><pre><span class="line">  1 package java.util;</span><br><span class="line">  2 </span><br><span class="line">  3 public class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt;</span><br><span class="line">  4         implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable</span><br><span class="line">  5 &#123;</span><br><span class="line">  6     // 序列版本号</span><br><span class="line">  7     private static final long serialVersionUID = 8683452581122892189L;</span><br><span class="line">  8 </span><br><span class="line">  9     // 保存ArrayList中数据的数组</span><br><span class="line"> 10     private transient Object[] elementData;</span><br><span class="line"> 11 </span><br><span class="line"> 12     // ArrayList中实际数据的数量</span><br><span class="line"> 13     private int size;</span><br><span class="line"> 14 </span><br><span class="line"> 15     // ArrayList带容量大小的构造函数。</span><br><span class="line"> 16     public ArrayList(int initialCapacity) &#123;</span><br><span class="line"> 17         super();</span><br><span class="line"> 18         if (initialCapacity &lt; 0)</span><br><span class="line"> 19             throw new IllegalArgumentException(&quot;Illegal Capacity: &quot;+</span><br><span class="line"> 20                                                initialCapacity);</span><br><span class="line"> 21         // 新建一个数组</span><br><span class="line"> 22         this.elementData = new Object[initialCapacity];</span><br><span class="line"> 23     &#125;</span><br><span class="line"> 24 </span><br><span class="line"> 25     // ArrayList构造函数。默认容量是10。</span><br><span class="line"> 26     public ArrayList() &#123;</span><br><span class="line"> 27         this(10);</span><br><span class="line"> 28     &#125;</span><br><span class="line"> 29 </span><br><span class="line"> 30     // 创建一个包含collection的ArrayList</span><br><span class="line"> 31     public ArrayList(Collection&lt;? extends E&gt; c) &#123;</span><br><span class="line"> 32         elementData = c.toArray();</span><br><span class="line"> 33         size = elementData.length;</span><br><span class="line"> 34         // c.toArray might (incorrectly) not return Object[] (see        6260652)</span><br><span class="line"> 35         if (elementData.getClass() != Object[].class)</span><br><span class="line"> 36             elementData = Arrays.copyOf(elementData, size, Object[].class);</span><br><span class="line"> 37     &#125;</span><br><span class="line"> 38 </span><br><span class="line"> 39 </span><br><span class="line"> 40     // 将当前容量值设为 =实际元素个数</span><br><span class="line"> 41     public void trimToSize() &#123;</span><br><span class="line"> 42         modCount++;</span><br><span class="line"> 43         int oldCapacity = elementData.length;</span><br><span class="line"> 44         if (size &lt; oldCapacity) &#123;</span><br><span class="line"> 45             elementData = Arrays.copyOf(elementData, size);</span><br><span class="line"> 46         &#125;</span><br><span class="line"> 47     &#125;</span><br><span class="line"> 48 </span><br><span class="line"> 49 </span><br><span class="line"> 50     // 确定ArrarList的容量。</span><br><span class="line"> 51     // 若ArrayList的容量不足以容纳当前的全部元素，设置 新的容量=“(原始容量x3)/2  + 1”</span><br><span class="line"> 52     public void ensureCapacity(int minCapacity) &#123;</span><br><span class="line"> 53         // 将“修改统计数”+1</span><br><span class="line"> 54         modCount++;</span><br><span class="line"> 55         int oldCapacity = elementData.length;</span><br><span class="line"> 56         // 若当前容量不足以容纳当前的元素个数，设置 新的容量=“(原始容量x3)/2 + 1”</span><br><span class="line"> 57         if (minCapacity &gt; oldCapacity) &#123;</span><br><span class="line"> 58             Object oldData[] = elementData;</span><br><span class="line"> 59             int newCapacity = (oldCapacity * 3)/2 + 1;</span><br><span class="line"> 60             if (newCapacity &lt; minCapacity)</span><br><span class="line"> 61                 newCapacity = minCapacity;</span><br><span class="line"> 62             elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line"> 63         &#125;</span><br><span class="line"> 64     &#125;</span><br><span class="line"> 65 </span><br><span class="line"> 66     // 添加元素e</span><br><span class="line"> 67     public boolean add(E e) &#123;</span><br><span class="line"> 68         // 确定ArrayList的容量大小</span><br><span class="line"> 69         ensureCapacity(size + 1);  // Increments modCount!!</span><br><span class="line"> 70         // 添加e到ArrayList中</span><br><span class="line"> 71         elementData[size++] = e;</span><br><span class="line"> 72         return true;</span><br><span class="line"> 73     &#125;</span><br><span class="line"> 74 </span><br><span class="line"> 75     // 返回ArrayList的实际大小</span><br><span class="line"> 76     public int size() &#123;</span><br><span class="line"> 77         return size;</span><br><span class="line"> 78     &#125;</span><br><span class="line"> 79 </span><br><span class="line"> 80     // 返回ArrayList是否包含Object(o)</span><br><span class="line"> 81     public boolean contains(Object o) &#123;</span><br><span class="line"> 82         return indexOf(o) &gt;= 0;</span><br><span class="line"> 83     &#125;</span><br><span class="line"> 84 </span><br><span class="line"> 85     // 返回ArrayList是否为空</span><br><span class="line"> 86     public boolean isEmpty() &#123;</span><br><span class="line"> 87         return size == 0;</span><br><span class="line"> 88     &#125;</span><br><span class="line"> 89 </span><br><span class="line"> 90     // 正向查找，返回元素的索引值</span><br><span class="line"> 91     public int indexOf(Object o) &#123;</span><br><span class="line"> 92         if (o == null) &#123;</span><br><span class="line"> 93             for (int i = 0; i &lt; size; i++)</span><br><span class="line"> 94             if (elementData[i]==null)</span><br><span class="line"> 95                 return i;</span><br><span class="line"> 96             &#125; else &#123;</span><br><span class="line"> 97                 for (int i = 0; i &lt; size; i++)</span><br><span class="line"> 98                 if (o.equals(elementData[i]))</span><br><span class="line"> 99                     return i;</span><br><span class="line">100             &#125;</span><br><span class="line">101             return -1;</span><br><span class="line">102         &#125;</span><br><span class="line">103 </span><br><span class="line">104         // 反向查找，返回元素的索引值</span><br><span class="line">105         public int lastIndexOf(Object o) &#123;</span><br><span class="line">106         if (o == null) &#123;</span><br><span class="line">107             for (int i = size-1; i &gt;= 0; i--)</span><br><span class="line">108             if (elementData[i]==null)</span><br><span class="line">109                 return i;</span><br><span class="line">110         &#125; else &#123;</span><br><span class="line">111             for (int i = size-1; i &gt;= 0; i--)</span><br><span class="line">112             if (o.equals(elementData[i]))</span><br><span class="line">113                 return i;</span><br><span class="line">114         &#125;</span><br><span class="line">115         return -1;</span><br><span class="line">116     &#125;</span><br><span class="line">117 </span><br><span class="line">118     // 反向查找(从数组末尾向开始查找)，返回元素(o)的索引值</span><br><span class="line">119     public int lastIndexOf(Object o) &#123;</span><br><span class="line">120         if (o == null) &#123;</span><br><span class="line">121             for (int i = size-1; i &gt;= 0; i--)</span><br><span class="line">122             if (elementData[i]==null)</span><br><span class="line">123                 return i;</span><br><span class="line">124         &#125; else &#123;</span><br><span class="line">125             for (int i = size-1; i &gt;= 0; i--)</span><br><span class="line">126             if (o.equals(elementData[i]))</span><br><span class="line">127                 return i;</span><br><span class="line">128         &#125;</span><br><span class="line">129         return -1;</span><br><span class="line">130     &#125;</span><br><span class="line">131  </span><br><span class="line">132 </span><br><span class="line">133     // 返回ArrayList的Object数组</span><br><span class="line">134     public Object[] toArray() &#123;</span><br><span class="line">135         return Arrays.copyOf(elementData, size);</span><br><span class="line">136     &#125;</span><br><span class="line">137 </span><br><span class="line">138     // 返回ArrayList的模板数组。所谓模板数组，即可以将T设为任意的数据类型</span><br><span class="line">139     public &lt;T&gt; T[] toArray(T[] a) &#123;</span><br><span class="line">140         // 若数组a的大小 &lt; ArrayList的元素个数；</span><br><span class="line">141         // 则新建一个T[]数组，数组大小是“ArrayList的元素个数”，并将“ArrayList”全部拷贝到新数组中</span><br><span class="line">142         if (a.length &lt; size)</span><br><span class="line">143             return (T[]) Arrays.copyOf(elementData, size, a.getClass());</span><br><span class="line">144 </span><br><span class="line">145         // 若数组a的大小 &gt;= ArrayList的元素个数；</span><br><span class="line">146         // 则将ArrayList的全部元素都拷贝到数组a中。</span><br><span class="line">147         System.arraycopy(elementData, 0, a, 0, size);</span><br><span class="line">148         if (a.length &gt; size)</span><br><span class="line">149             a[size] = null;</span><br><span class="line">150         return a;</span><br><span class="line">151     &#125;</span><br><span class="line">152 </span><br><span class="line">153     // 获取index位置的元素值</span><br><span class="line">154     public E get(int index) &#123;</span><br><span class="line">155         RangeCheck(index);</span><br><span class="line">156 </span><br><span class="line">157         return (E) elementData[index];</span><br><span class="line">158     &#125;</span><br><span class="line">159 </span><br><span class="line">160     // 设置index位置的值为element</span><br><span class="line">161     public E set(int index, E element) &#123;</span><br><span class="line">162         RangeCheck(index);</span><br><span class="line">163 </span><br><span class="line">164         E oldValue = (E) elementData[index];</span><br><span class="line">165         elementData[index] = element;</span><br><span class="line">166         return oldValue;</span><br><span class="line">167     &#125;</span><br><span class="line">168 </span><br><span class="line">169     // 将e添加到ArrayList中</span><br><span class="line">170     public boolean add(E e) &#123;</span><br><span class="line">171         ensureCapacity(size + 1);  // Increments modCount!!</span><br><span class="line">172         elementData[size++] = e;</span><br><span class="line">173         return true;</span><br><span class="line">174     &#125;</span><br><span class="line">175 </span><br><span class="line">176     // 将e添加到ArrayList的指定位置</span><br><span class="line">177     public void add(int index, E element) &#123;</span><br><span class="line">178         if (index &gt; size || index &lt; 0)</span><br><span class="line">179             throw new IndexOutOfBoundsException(</span><br><span class="line">180             &quot;Index: &quot;+index+&quot;, Size: &quot;+size);</span><br><span class="line">181 </span><br><span class="line">182         ensureCapacity(size+1);  // Increments modCount!!</span><br><span class="line">183         System.arraycopy(elementData, index, elementData, index + 1,</span><br><span class="line">184              size - index);</span><br><span class="line">185         elementData[index] = element;</span><br><span class="line">186         size++;</span><br><span class="line">187     &#125;</span><br><span class="line">188 </span><br><span class="line">189     // 删除ArrayList指定位置的元素</span><br><span class="line">190     public E remove(int index) &#123;</span><br><span class="line">191         RangeCheck(index);</span><br><span class="line">192 </span><br><span class="line">193         modCount++;</span><br><span class="line">194         E oldValue = (E) elementData[index];</span><br><span class="line">195 </span><br><span class="line">196         int numMoved = size - index - 1;</span><br><span class="line">197         if (numMoved &gt; 0)</span><br><span class="line">198             System.arraycopy(elementData, index+1, elementData, index,</span><br><span class="line">199                  numMoved);</span><br><span class="line">200         elementData[--size] = null; // Let gc do its work</span><br><span class="line">201 </span><br><span class="line">202         return oldValue;</span><br><span class="line">203     &#125;</span><br><span class="line">204 </span><br><span class="line">205     // 删除ArrayList的指定元素</span><br><span class="line">206     public boolean remove(Object o) &#123;</span><br><span class="line">207         if (o == null) &#123;</span><br><span class="line">208                 for (int index = 0; index &lt; size; index++)</span><br><span class="line">209             if (elementData[index] == null) &#123;</span><br><span class="line">210                 fastRemove(index);</span><br><span class="line">211                 return true;</span><br><span class="line">212             &#125;</span><br><span class="line">213         &#125; else &#123;</span><br><span class="line">214             for (int index = 0; index &lt; size; index++)</span><br><span class="line">215             if (o.equals(elementData[index])) &#123;</span><br><span class="line">216                 fastRemove(index);</span><br><span class="line">217                 return true;</span><br><span class="line">218             &#125;</span><br><span class="line">219         &#125;</span><br><span class="line">220         return false;</span><br><span class="line">221     &#125;</span><br><span class="line">222 </span><br><span class="line">223 </span><br><span class="line">224     // 快速删除第index个元素</span><br><span class="line">225     private void fastRemove(int index) &#123;</span><br><span class="line">226         modCount++;</span><br><span class="line">227         int numMoved = size - index - 1;</span><br><span class="line">228         // 从&quot;index+1&quot;开始，用后面的元素替换前面的元素。</span><br><span class="line">229         if (numMoved &gt; 0)</span><br><span class="line">230             System.arraycopy(elementData, index+1, elementData, index,</span><br><span class="line">231                              numMoved);</span><br><span class="line">232         // 将最后一个元素设为null</span><br><span class="line">233         elementData[--size] = null; // Let gc do its work</span><br><span class="line">234     &#125;</span><br><span class="line">235 </span><br><span class="line">236     // 删除元素</span><br><span class="line">237     public boolean remove(Object o) &#123;</span><br><span class="line">238         if (o == null) &#123;</span><br><span class="line">239             for (int index = 0; index &lt; size; index++)</span><br><span class="line">240             if (elementData[index] == null) &#123;</span><br><span class="line">241                 fastRemove(index);</span><br><span class="line">242             return true;</span><br><span class="line">243             &#125;</span><br><span class="line">244         &#125; else &#123;</span><br><span class="line">245             // 便利ArrayList，找到“元素o”，则删除，并返回true。</span><br><span class="line">246             for (int index = 0; index &lt; size; index++)</span><br><span class="line">247             if (o.equals(elementData[index])) &#123;</span><br><span class="line">248                 fastRemove(index);</span><br><span class="line">249             return true;</span><br><span class="line">250             &#125;</span><br><span class="line">251         &#125;</span><br><span class="line">252         return false;</span><br><span class="line">253     &#125;</span><br><span class="line">254 </span><br><span class="line">255     // 清空ArrayList，将全部的元素设为null</span><br><span class="line">256     public void clear() &#123;</span><br><span class="line">257         modCount++;</span><br><span class="line">258 </span><br><span class="line">259         for (int i = 0; i &lt; size; i++)</span><br><span class="line">260             elementData[i] = null;</span><br><span class="line">261 </span><br><span class="line">262         size = 0;</span><br><span class="line">263     &#125;</span><br><span class="line">264 </span><br><span class="line">265     // 将集合c追加到ArrayList中</span><br><span class="line">266     public boolean addAll(Collection&lt;? extends E&gt; c) &#123;</span><br><span class="line">267         Object[] a = c.toArray();</span><br><span class="line">268         int numNew = a.length;</span><br><span class="line">269         ensureCapacity(size + numNew);  // Increments modCount</span><br><span class="line">270         System.arraycopy(a, 0, elementData, size, numNew);</span><br><span class="line">271         size += numNew;</span><br><span class="line">272         return numNew != 0;</span><br><span class="line">273     &#125;</span><br><span class="line">274 </span><br><span class="line">275     // 从index位置开始，将集合c添加到ArrayList</span><br><span class="line">276     public boolean addAll(int index, Collection&lt;? extends E&gt; c) &#123;</span><br><span class="line">277         if (index &gt; size || index &lt; 0)</span><br><span class="line">278             throw new IndexOutOfBoundsException(</span><br><span class="line">279             &quot;Index: &quot; + index + &quot;, Size: &quot; + size);</span><br><span class="line">280 </span><br><span class="line">281         Object[] a = c.toArray();</span><br><span class="line">282         int numNew = a.length;</span><br><span class="line">283         ensureCapacity(size + numNew);  // Increments modCount</span><br><span class="line">284 </span><br><span class="line">285         int numMoved = size - index;</span><br><span class="line">286         if (numMoved &gt; 0)</span><br><span class="line">287             System.arraycopy(elementData, index, elementData, index + numNew,</span><br><span class="line">288                  numMoved);</span><br><span class="line">289 </span><br><span class="line">290         System.arraycopy(a, 0, elementData, index, numNew);</span><br><span class="line">291         size += numNew;</span><br><span class="line">292         return numNew != 0;</span><br><span class="line">293     &#125;</span><br><span class="line">294 </span><br><span class="line">295     // 删除fromIndex到toIndex之间的全部元素。</span><br><span class="line">296     protected void removeRange(int fromIndex, int toIndex) &#123;</span><br><span class="line">297     modCount++;</span><br><span class="line">298     int numMoved = size - toIndex;</span><br><span class="line">299         System.arraycopy(elementData, toIndex, elementData, fromIndex,</span><br><span class="line">300                          numMoved);</span><br><span class="line">301 </span><br><span class="line">302     // Let gc do its work</span><br><span class="line">303     int newSize = size - (toIndex-fromIndex);</span><br><span class="line">304     while (size != newSize)</span><br><span class="line">305         elementData[--size] = null;</span><br><span class="line">306     &#125;</span><br><span class="line">307 </span><br><span class="line">308     private void RangeCheck(int index) &#123;</span><br><span class="line">309     if (index &gt;= size)</span><br><span class="line">310         throw new IndexOutOfBoundsException(</span><br><span class="line">311         &quot;Index: &quot;+index+&quot;, Size: &quot;+size);</span><br><span class="line">312     &#125;</span><br><span class="line">313 </span><br><span class="line">314 </span><br><span class="line">315     // 克隆函数</span><br><span class="line">316     public Object clone() &#123;</span><br><span class="line">317         try &#123;</span><br><span class="line">318             ArrayList&lt;E&gt; v = (ArrayList&lt;E&gt;) super.clone();</span><br><span class="line">319             // 将当前ArrayList的全部元素拷贝到v中</span><br><span class="line">320             v.elementData = Arrays.copyOf(elementData, size);</span><br><span class="line">321             v.modCount = 0;</span><br><span class="line">322             return v;</span><br><span class="line">323         &#125; catch (CloneNotSupportedException e) &#123;</span><br><span class="line">324             // this shouldn&apos;t happen, since we are Cloneable</span><br><span class="line">325             throw new InternalError();</span><br><span class="line">326         &#125;</span><br><span class="line">327     &#125;</span><br><span class="line">328 </span><br><span class="line">329 </span><br><span class="line">330     // java.io.Serializable的写入函数</span><br><span class="line">331     // 将ArrayList的“容量，所有的元素值”都写入到输出流中</span><br><span class="line">332     private void writeObject(java.io.ObjectOutputStream s)</span><br><span class="line">333         throws java.io.IOException&#123;</span><br><span class="line">334     // Write out element count, and any hidden stuff</span><br><span class="line">335     int expectedModCount = modCount;</span><br><span class="line">336     s.defaultWriteObject();</span><br><span class="line">337 </span><br><span class="line">338         // 写入“数组的容量”</span><br><span class="line">339         s.writeInt(elementData.length);</span><br><span class="line">340 </span><br><span class="line">341     // 写入“数组的每一个元素”</span><br><span class="line">342     for (int i=0; i&lt;size; i++)</span><br><span class="line">343             s.writeObject(elementData[i]);</span><br><span class="line">344 </span><br><span class="line">345     if (modCount != expectedModCount) &#123;</span><br><span class="line">346             throw new ConcurrentModificationException();</span><br><span class="line">347         &#125;</span><br><span class="line">348 </span><br><span class="line">349     &#125;</span><br><span class="line">350 </span><br><span class="line">351 </span><br><span class="line">352     // java.io.Serializable的读取函数：根据写入方式读出</span><br><span class="line">353     // 先将ArrayList的“容量”读出，然后将“所有的元素值”读出</span><br><span class="line">354     private void readObject(java.io.ObjectInputStream s)</span><br><span class="line">355         throws java.io.IOException, ClassNotFoundException &#123;</span><br><span class="line">356         // Read in size, and any hidden stuff</span><br><span class="line">357         s.defaultReadObject();</span><br><span class="line">358 </span><br><span class="line">359         // 从输入流中读取ArrayList的“容量”</span><br><span class="line">360         int arrayLength = s.readInt();</span><br><span class="line">361         Object[] a = elementData = new Object[arrayLength];</span><br><span class="line">362 </span><br><span class="line">363         // 从输入流中将“所有的元素值”读出</span><br><span class="line">364         for (int i=0; i&lt;size; i++)</span><br><span class="line">365             a[i] = s.readObject();</span><br><span class="line">366     &#125;</span><br><span class="line">367 &#125;</span><br></pre></td></tr></table></figure>
<p>总结源码：</p>
<ul>
<li>ArrayList实际上<strong>通过一个数组去保存数据</strong>，当我们构造ArrayList时；若使用默认构造函数，ArrayList<strong>默认大小为10 </strong>。</li>
<li><p>当ArrayList容量不足以去容纳全部元素时，ArrayList会重新设置容量：<strong>新的容量 = （原始容量*3/2 + 1 </strong>。</p>
</li>
<li><p>ArrayList的克隆函数，即是将全部元素克隆到一个数组中。</p>
</li>
</ul>
<h2 id="ArrayList的遍历方式"><a href="#ArrayList的遍历方式" class="headerlink" title="ArrayList的遍历方式"></a>ArrayList的遍历方式</h2><ul>
<li>迭代器遍历</li>
<li>随机访问，通过索引值遍历</li>
<li>for循环遍历</li>
</ul>
<p><strong>遍历ArrayList时，使用随机访问（通过索引序号访问）效率最高，而使用迭代器效率最低。</strong></p>
<h1 id="LinkedList详解"><a href="#LinkedList详解" class="headerlink" title="LinkedList详解"></a>LinkedList详解</h1><h2 id="LinkedList简介"><a href="#LinkedList简介" class="headerlink" title="LinkedList简介"></a>LinkedList简介</h2><p>LinkedList 是一个继承于AbstractSequentialList的双向链表。它也可以被当作堆栈、队列或双端队列进行操作。<br>LinkedList 实现 List 接口，能对它进行队列操作。<br>LinkedList 实现 Deque 接口，即能将LinkedList当作双端队列使用。<br>LinkedList 实现了Cloneable接口，即覆盖了函数clone()，能克隆。<br>LinkedList 实现java.io.Serializable接口，这意味着LinkedList支持序列化，能通过序列化去传输。<br>LinkedList 是非同步的。</p>
<h2 id="Linkedlist的API"><a href="#Linkedlist的API" class="headerlink" title="Linkedlist的API"></a>Linkedlist的API</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">LinkedList的API</span><br><span class="line">boolean       add(E object)</span><br><span class="line">void          add(int location, E object)</span><br><span class="line">boolean       addAll(Collection&lt;? extends E&gt; collection)</span><br><span class="line">boolean       addAll(int location, Collection&lt;? extends E&gt; collection)</span><br><span class="line">void          addFirst(E object)</span><br><span class="line">void          addLast(E object)</span><br><span class="line">void          clear()</span><br><span class="line">Object        clone()</span><br><span class="line">boolean       contains(Object object)</span><br><span class="line">Iterator&lt;E&gt;   descendingIterator()</span><br><span class="line">E             element()</span><br><span class="line">E             get(int location)</span><br><span class="line">E             getFirst()</span><br><span class="line">E             getLast()</span><br><span class="line">int           indexOf(Object object)</span><br><span class="line">int           lastIndexOf(Object object)</span><br><span class="line">ListIterator&lt;E&gt;     listIterator(int location)</span><br><span class="line">boolean       offer(E o)</span><br><span class="line">boolean       offerFirst(E e)</span><br><span class="line">boolean       offerLast(E e)</span><br><span class="line">E             peek()</span><br><span class="line">E             peekFirst()</span><br><span class="line">E             peekLast()</span><br><span class="line">E             poll()</span><br><span class="line">E             pollFirst()</span><br><span class="line">E             pollLast()</span><br><span class="line">E             pop()</span><br><span class="line">void          push(E e)</span><br><span class="line">E             remove()</span><br><span class="line">E             remove(int location)</span><br><span class="line">boolean       remove(Object object)</span><br><span class="line">E             removeFirst()</span><br><span class="line">boolean       removeFirstOccurrence(Object o)</span><br><span class="line">E             removeLast()</span><br><span class="line">boolean       removeLastOccurrence(Object o)</span><br><span class="line">E             set(int location, E object)</span><br><span class="line">int           size()</span><br><span class="line">&lt;T&gt; T[]       toArray(T[] contents)</span><br><span class="line">Object[]     toArray()</span><br></pre></td></tr></table></figure>
<h2 id="LinkedList源码解析"><a href="#LinkedList源码解析" class="headerlink" title="LinkedList源码解析"></a>LinkedList源码解析</h2><p>为了更了解LinkedList的原理，<strong>下面对LinkedList源码代码作出分析</strong>。</p>
<p>在阅读源码之前，我们先对LinkedList的整体实现进行大致说明：<br>   LinkedList实际上是通过双向链表去实现的。既然是双向链表，那么它的<strong>顺序访问会非常高效，而随机访问效率比较低</strong>。<br>​    既然LinkedList是通过双向链表的，但是它也实现了List接口{也就是说，它实现了get(int location)、remove(int location)等 “根据索引值来获取、删除节点的函数”}。LinkedList是如何实现List的这些接口的，如何将“双向链表和索引值联系起来的”？<br>​    实际原理非常简单，它就是通过一个<strong>计数索引值</strong>来实现的。例如，当我们调用get(int location)时，首先会比较“location”和“双向链表长度的1/2”；若前者大，则从链表头开始往后查找，直到location位置；否则，从链表末尾开始先前查找，直到location位置。<br>   这就是“双线链表和索引值联系起来”的方法。</p>
<p>好了，接下来开始阅读源码(只要理解双向链表，那么LinkedList的源码很容易理解的)。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br></pre></td><td class="code"><pre><span class="line">1 package java.util;</span><br><span class="line">  2 </span><br><span class="line">  3 public class LinkedList&lt;E&gt;</span><br><span class="line">  4     extends AbstractSequentialList&lt;E&gt;</span><br><span class="line">  5     implements List&lt;E&gt;, Deque&lt;E&gt;, Cloneable, java.io.Serializable</span><br><span class="line">  6 &#123;</span><br><span class="line">  7     // 链表的表头，表头不包含任何数据。Entry是个链表类数据结构。</span><br><span class="line">  8     private transient Entry&lt;E&gt; header = new Entry&lt;E&gt;(null, null, null);</span><br><span class="line">  9 </span><br><span class="line"> 10     // LinkedList中元素个数</span><br><span class="line"> 11     private transient int size = 0;</span><br><span class="line"> 12 </span><br><span class="line"> 13     // 默认构造函数：创建一个空的链表</span><br><span class="line"> 14     public LinkedList() &#123;</span><br><span class="line"> 15         header.next = header.previous = header;</span><br><span class="line"> 16     &#125;</span><br><span class="line"> 17 </span><br><span class="line"> 18     // 包含“集合”的构造函数:创建一个包含“集合”的LinkedList</span><br><span class="line"> 19     public LinkedList(Collection&lt;? extends E&gt; c) &#123;</span><br><span class="line"> 20         this();</span><br><span class="line"> 21         addAll(c);</span><br><span class="line"> 22     &#125;</span><br><span class="line"> 23 </span><br><span class="line"> 24     // 获取LinkedList的第一个元素</span><br><span class="line"> 25     public E getFirst() &#123;</span><br><span class="line"> 26         if (size==0)</span><br><span class="line"> 27             throw new NoSuchElementException();</span><br><span class="line"> 28 </span><br><span class="line"> 29         // 链表的表头header中不包含数据。</span><br><span class="line"> 30         // 这里返回header所指下一个节点所包含的数据。</span><br><span class="line"> 31         return header.next.element;</span><br><span class="line"> 32     &#125;</span><br><span class="line"> 33 </span><br><span class="line"> 34     // 获取LinkedList的最后一个元素</span><br><span class="line"> 35     public E getLast()  &#123;</span><br><span class="line"> 36         if (size==0)</span><br><span class="line"> 37             throw new NoSuchElementException();</span><br><span class="line"> 38 </span><br><span class="line"> 39         // 由于LinkedList是双向链表；而表头header不包含数据。</span><br><span class="line"> 40         // 因而，这里返回表头header的前一个节点所包含的数据。</span><br><span class="line"> 41         return header.previous.element;</span><br><span class="line"> 42     &#125;</span><br><span class="line"> 43 </span><br><span class="line"> 44     // 删除LinkedList的第一个元素</span><br><span class="line"> 45     public E removeFirst() &#123;</span><br><span class="line"> 46         return remove(header.next);</span><br><span class="line"> 47     &#125;</span><br><span class="line"> 48 </span><br><span class="line"> 49     // 删除LinkedList的最后一个元素</span><br><span class="line"> 50     public E removeLast() &#123;</span><br><span class="line"> 51         return remove(header.previous);</span><br><span class="line"> 52     &#125;</span><br><span class="line"> 53 </span><br><span class="line"> 54     // 将元素添加到LinkedList的起始位置</span><br><span class="line"> 55     public void addFirst(E e) &#123;</span><br><span class="line"> 56         addBefore(e, header.next);</span><br><span class="line"> 57     &#125;</span><br><span class="line"> 58 </span><br><span class="line"> 59     // 将元素添加到LinkedList的结束位置</span><br><span class="line"> 60     public void addLast(E e) &#123;</span><br><span class="line"> 61         addBefore(e, header);</span><br><span class="line"> 62     &#125;</span><br><span class="line"> 63 </span><br><span class="line"> 64     // 判断LinkedList是否包含元素(o)</span><br><span class="line"> 65     public boolean contains(Object o) &#123;</span><br><span class="line"> 66         return indexOf(o) != -1;</span><br><span class="line"> 67     &#125;</span><br><span class="line"> 68 </span><br><span class="line"> 69     // 返回LinkedList的大小</span><br><span class="line"> 70     public int size() &#123;</span><br><span class="line"> 71         return size;</span><br><span class="line"> 72     &#125;</span><br><span class="line"> 73 </span><br><span class="line"> 74     // 将元素(E)添加到LinkedList中</span><br><span class="line"> 75     public boolean add(E e) &#123;</span><br><span class="line"> 76         // 将节点(节点数据是e)添加到表头(header)之前。</span><br><span class="line"> 77         // 即，将节点添加到双向链表的末端。</span><br><span class="line"> 78         addBefore(e, header);</span><br><span class="line"> 79         return true;</span><br><span class="line"> 80     &#125;</span><br><span class="line"> 81 </span><br><span class="line"> 82     // 从LinkedList中删除元素(o)</span><br><span class="line"> 83     // 从链表开始查找，如存在元素(o)则删除该元素并返回true；</span><br><span class="line"> 84     // 否则，返回false。</span><br><span class="line"> 85     public boolean remove(Object o) &#123;</span><br><span class="line"> 86         if (o==null) &#123;</span><br><span class="line"> 87             // 若o为null的删除情况</span><br><span class="line"> 88             for (Entry&lt;E&gt; e = header.next; e != header; e = e.next) &#123;</span><br><span class="line"> 89                 if (e.element==null) &#123;</span><br><span class="line"> 90                     remove(e);</span><br><span class="line"> 91                     return true;</span><br><span class="line"> 92                 &#125;</span><br><span class="line"> 93             &#125;</span><br><span class="line"> 94         &#125; else &#123;</span><br><span class="line"> 95             // 若o不为null的删除情况</span><br><span class="line"> 96             for (Entry&lt;E&gt; e = header.next; e != header; e = e.next) &#123;</span><br><span class="line"> 97                 if (o.equals(e.element)) &#123;</span><br><span class="line"> 98                     remove(e);</span><br><span class="line"> 99                     return true;</span><br><span class="line">100                 &#125;</span><br><span class="line">101             &#125;</span><br><span class="line">102         &#125;</span><br><span class="line">103         return false;</span><br><span class="line">104     &#125;</span><br><span class="line">105 </span><br><span class="line">106     // 将“集合(c)”添加到LinkedList中。</span><br><span class="line">107     // 实际上，是从双向链表的末尾开始，将“集合(c)”添加到双向链表中。</span><br><span class="line">108     public boolean addAll(Collection&lt;? extends E&gt; c) &#123;</span><br><span class="line">109         return addAll(size, c);</span><br><span class="line">110     &#125;</span><br><span class="line">111 </span><br><span class="line">112     // 从双向链表的index开始，将“集合(c)”添加到双向链表中。</span><br><span class="line">113     public boolean addAll(int index, Collection&lt;? extends E&gt; c) &#123;</span><br><span class="line">114         if (index &lt; 0 || index &gt; size)</span><br><span class="line">115             throw new IndexOutOfBoundsException(&quot;Index: &quot;+index+</span><br><span class="line">116                                                 &quot;, Size: &quot;+size);</span><br><span class="line">117         Object[] a = c.toArray();</span><br><span class="line">118         // 获取集合的长度</span><br><span class="line">119         int numNew = a.length;</span><br><span class="line">120         if (numNew==0)</span><br><span class="line">121             return false;</span><br><span class="line">122         modCount++;</span><br><span class="line">123 </span><br><span class="line">124         // 设置“当前要插入节点的后一个节点”</span><br><span class="line">125         Entry&lt;E&gt; successor = (index==size ? header : entry(index));</span><br><span class="line">126         // 设置“当前要插入节点的前一个节点”</span><br><span class="line">127         Entry&lt;E&gt; predecessor = successor.previous;</span><br><span class="line">128         // 将集合(c)全部插入双向链表中</span><br><span class="line">129         for (int i=0; i&lt;numNew; i++) &#123;</span><br><span class="line">130             Entry&lt;E&gt; e = new Entry&lt;E&gt;((E)a[i], successor, predecessor);</span><br><span class="line">131             predecessor.next = e;</span><br><span class="line">132             predecessor = e;</span><br><span class="line">133         &#125;</span><br><span class="line">134         successor.previous = predecessor;</span><br><span class="line">135 </span><br><span class="line">136         // 调整LinkedList的实际大小</span><br><span class="line">137         size += numNew;</span><br><span class="line">138         return true;</span><br><span class="line">139     &#125;</span><br><span class="line">140 </span><br><span class="line">141     // 清空双向链表</span><br><span class="line">142     public void clear() &#123;</span><br><span class="line">143         Entry&lt;E&gt; e = header.next;</span><br><span class="line">144         // 从表头开始，逐个向后遍历；对遍历到的节点执行一下操作：</span><br><span class="line">145         // (01) 设置前一个节点为null </span><br><span class="line">146         // (02) 设置当前节点的内容为null </span><br><span class="line">147         // (03) 设置后一个节点为“新的当前节点”</span><br><span class="line">148         while (e != header) &#123;</span><br><span class="line">149             Entry&lt;E&gt; next = e.next;</span><br><span class="line">150             e.next = e.previous = null;</span><br><span class="line">151             e.element = null;</span><br><span class="line">152             e = next;</span><br><span class="line">153         &#125;</span><br><span class="line">154         header.next = header.previous = header;</span><br><span class="line">155         // 设置大小为0</span><br><span class="line">156         size = 0;</span><br><span class="line">157         modCount++;</span><br><span class="line">158     &#125;</span><br><span class="line">159 </span><br><span class="line">160     // 返回LinkedList指定位置的元素</span><br><span class="line">161     public E get(int index) &#123;</span><br><span class="line">162         return entry(index).element;</span><br><span class="line">163     &#125;</span><br><span class="line">164 </span><br><span class="line">165     // 设置index位置对应的节点的值为element</span><br><span class="line">166     public E set(int index, E element) &#123;</span><br><span class="line">167         Entry&lt;E&gt; e = entry(index);</span><br><span class="line">168         E oldVal = e.element;</span><br><span class="line">169         e.element = element;</span><br><span class="line">170         return oldVal;</span><br><span class="line">171     &#125;</span><br><span class="line">172  </span><br><span class="line">173     // 在index前添加节点，且节点的值为element</span><br><span class="line">174     public void add(int index, E element) &#123;</span><br><span class="line">175         addBefore(element, (index==size ? header : entry(index)));</span><br><span class="line">176     &#125;</span><br><span class="line">177 </span><br><span class="line">178     // 删除index位置的节点</span><br><span class="line">179     public E remove(int index) &#123;</span><br><span class="line">180         return remove(entry(index));</span><br><span class="line">181     &#125;</span><br><span class="line">182 </span><br><span class="line">183     // 获取双向链表中指定位置的节点</span><br><span class="line">184     private Entry&lt;E&gt; entry(int index) &#123;</span><br><span class="line">185         if (index &lt; 0 || index &gt;= size)</span><br><span class="line">186             throw new IndexOutOfBoundsException(&quot;Index: &quot;+index+</span><br><span class="line">187                                                 &quot;, Size: &quot;+size);</span><br><span class="line">188         Entry&lt;E&gt; e = header;</span><br><span class="line">189         // 获取index处的节点。</span><br><span class="line">190         // 若index &lt; 双向链表长度的1/2,则从前先后查找;</span><br><span class="line">191         // 否则，从后向前查找。</span><br><span class="line">192         if (index &lt; (size &gt;&gt; 1)) &#123;</span><br><span class="line">193             for (int i = 0; i &lt;= index; i++)</span><br><span class="line">194                 e = e.next;</span><br><span class="line">195         &#125; else &#123;</span><br><span class="line">196             for (int i = size; i &gt; index; i--)</span><br><span class="line">197                 e = e.previous;</span><br><span class="line">198         &#125;</span><br><span class="line">199         return e;</span><br><span class="line">200     &#125;</span><br><span class="line">201 </span><br><span class="line">202     // 从前向后查找，返回“值为对象(o)的节点对应的索引”</span><br><span class="line">203     // 不存在就返回-1</span><br><span class="line">204     public int indexOf(Object o) &#123;</span><br><span class="line">205         int index = 0;</span><br><span class="line">206         if (o==null) &#123;</span><br><span class="line">207             for (Entry e = header.next; e != header; e = e.next) &#123;</span><br><span class="line">208                 if (e.element==null)</span><br><span class="line">209                     return index;</span><br><span class="line">210                 index++;</span><br><span class="line">211             &#125;</span><br><span class="line">212         &#125; else &#123;</span><br><span class="line">213             for (Entry e = header.next; e != header; e = e.next) &#123;</span><br><span class="line">214                 if (o.equals(e.element))</span><br><span class="line">215                     return index;</span><br><span class="line">216                 index++;</span><br><span class="line">217             &#125;</span><br><span class="line">218         &#125;</span><br><span class="line">219         return -1;</span><br><span class="line">220     &#125;</span><br><span class="line">221 </span><br><span class="line">222     // 从后向前查找，返回“值为对象(o)的节点对应的索引”</span><br><span class="line">223     // 不存在就返回-1</span><br><span class="line">224     public int lastIndexOf(Object o) &#123;</span><br><span class="line">225         int index = size;</span><br><span class="line">226         if (o==null) &#123;</span><br><span class="line">227             for (Entry e = header.previous; e != header; e = e.previous) &#123;</span><br><span class="line">228                 index--;</span><br><span class="line">229                 if (e.element==null)</span><br><span class="line">230                     return index;</span><br><span class="line">231             &#125;</span><br><span class="line">232         &#125; else &#123;</span><br><span class="line">233             for (Entry e = header.previous; e != header; e = e.previous) &#123;</span><br><span class="line">234                 index--;</span><br><span class="line">235                 if (o.equals(e.element))</span><br><span class="line">236                     return index;</span><br><span class="line">237             &#125;</span><br><span class="line">238         &#125;</span><br><span class="line">239         return -1;</span><br><span class="line">240     &#125;</span><br><span class="line">241 </span><br><span class="line">242     // 返回第一个节点</span><br><span class="line">243     // 若LinkedList的大小为0,则返回null</span><br><span class="line">244     public E peek() &#123;</span><br><span class="line">245         if (size==0)</span><br><span class="line">246             return null;</span><br><span class="line">247         return getFirst();</span><br><span class="line">248     &#125;</span><br><span class="line">249 </span><br><span class="line">250     // 返回第一个节点</span><br><span class="line">251     // 若LinkedList的大小为0,则抛出异常</span><br><span class="line">252     public E element() &#123;</span><br><span class="line">253         return getFirst();</span><br><span class="line">254     &#125;</span><br><span class="line">255 </span><br><span class="line">256     // 删除并返回第一个节点</span><br><span class="line">257     // 若LinkedList的大小为0,则返回null</span><br><span class="line">258     public E poll() &#123;</span><br><span class="line">259         if (size==0)</span><br><span class="line">260             return null;</span><br><span class="line">261         return removeFirst();</span><br><span class="line">262     &#125;</span><br><span class="line">263 </span><br><span class="line">264     // 将e添加双向链表末尾</span><br><span class="line">265     public boolean offer(E e) &#123;</span><br><span class="line">266         return add(e);</span><br><span class="line">267     &#125;</span><br><span class="line">268 </span><br><span class="line">269     // 将e添加双向链表开头</span><br><span class="line">270     public boolean offerFirst(E e) &#123;</span><br><span class="line">271         addFirst(e);</span><br><span class="line">272         return true;</span><br><span class="line">273     &#125;</span><br><span class="line">274 </span><br><span class="line">275     // 将e添加双向链表末尾</span><br><span class="line">276     public boolean offerLast(E e) &#123;</span><br><span class="line">277         addLast(e);</span><br><span class="line">278         return true;</span><br><span class="line">279     &#125;</span><br><span class="line">280 </span><br><span class="line">281     // 返回第一个节点</span><br><span class="line">282     // 若LinkedList的大小为0,则返回null</span><br><span class="line">283     public E peekFirst() &#123;</span><br><span class="line">284         if (size==0)</span><br><span class="line">285             return null;</span><br><span class="line">286         return getFirst();</span><br><span class="line">287     &#125;</span><br><span class="line">288 </span><br><span class="line">289     // 返回最后一个节点</span><br><span class="line">290     // 若LinkedList的大小为0,则返回null</span><br><span class="line">291     public E peekLast() &#123;</span><br><span class="line">292         if (size==0)</span><br><span class="line">293             return null;</span><br><span class="line">294         return getLast();</span><br><span class="line">295     &#125;</span><br><span class="line">296 </span><br><span class="line">297     // 删除并返回第一个节点</span><br><span class="line">298     // 若LinkedList的大小为0,则返回null</span><br><span class="line">299     public E pollFirst() &#123;</span><br><span class="line">300         if (size==0)</span><br><span class="line">301             return null;</span><br><span class="line">302         return removeFirst();</span><br><span class="line">303     &#125;</span><br><span class="line">304 </span><br><span class="line">305     // 删除并返回最后一个节点</span><br><span class="line">306     // 若LinkedList的大小为0,则返回null</span><br><span class="line">307     public E pollLast() &#123;</span><br><span class="line">308         if (size==0)</span><br><span class="line">309             return null;</span><br><span class="line">310         return removeLast();</span><br><span class="line">311     &#125;</span><br><span class="line">312 </span><br><span class="line">313     // 将e插入到双向链表开头</span><br><span class="line">314     public void push(E e) &#123;</span><br><span class="line">315         addFirst(e);</span><br><span class="line">316     &#125;</span><br><span class="line">317 </span><br><span class="line">318     // 删除并返回第一个节点</span><br><span class="line">319     public E pop() &#123;</span><br><span class="line">320         return removeFirst();</span><br><span class="line">321     &#125;</span><br><span class="line">322 </span><br><span class="line">323     // 从LinkedList开始向后查找，删除第一个值为元素(o)的节点</span><br><span class="line">324     // 从链表开始查找，如存在节点的值为元素(o)的节点，则删除该节点</span><br><span class="line">325     public boolean removeFirstOccurrence(Object o) &#123;</span><br><span class="line">326         return remove(o);</span><br><span class="line">327     &#125;</span><br><span class="line">328 </span><br><span class="line">329     // 从LinkedList末尾向前查找，删除第一个值为元素(o)的节点</span><br><span class="line">330     // 从链表开始查找，如存在节点的值为元素(o)的节点，则删除该节点</span><br><span class="line">331     public boolean removeLastOccurrence(Object o) &#123;</span><br><span class="line">332         if (o==null) &#123;</span><br><span class="line">333             for (Entry&lt;E&gt; e = header.previous; e != header; e = e.previous) &#123;</span><br><span class="line">334                 if (e.element==null) &#123;</span><br><span class="line">335                     remove(e);</span><br><span class="line">336                     return true;</span><br><span class="line">337                 &#125;</span><br><span class="line">338             &#125;</span><br><span class="line">339         &#125; else &#123;</span><br><span class="line">340             for (Entry&lt;E&gt; e = header.previous; e != header; e = e.previous) &#123;</span><br><span class="line">341                 if (o.equals(e.element)) &#123;</span><br><span class="line">342                     remove(e);</span><br><span class="line">343                     return true;</span><br><span class="line">344                 &#125;</span><br><span class="line">345             &#125;</span><br><span class="line">346         &#125;</span><br><span class="line">347         return false;</span><br><span class="line">348     &#125;</span><br><span class="line">349 </span><br><span class="line">350     // 返回“index到末尾的全部节点”对应的ListIterator对象(List迭代器)</span><br><span class="line">351     public ListIterator&lt;E&gt; listIterator(int index) &#123;</span><br><span class="line">352         return new ListItr(index);</span><br><span class="line">353     &#125;</span><br><span class="line">354 </span><br><span class="line">355     // List迭代器</span><br><span class="line">356     private class ListItr implements ListIterator&lt;E&gt; &#123;</span><br><span class="line">357         // 上一次返回的节点</span><br><span class="line">358         private Entry&lt;E&gt; lastReturned = header;</span><br><span class="line">359         // 下一个节点</span><br><span class="line">360         private Entry&lt;E&gt; next;</span><br><span class="line">361         // 下一个节点对应的索引值</span><br><span class="line">362         private int nextIndex;</span><br><span class="line">363         // 期望的改变计数。用来实现fail-fast机制。</span><br><span class="line">364         private int expectedModCount = modCount;</span><br><span class="line">365 </span><br><span class="line">366         // 构造函数。</span><br><span class="line">367         // 从index位置开始进行迭代</span><br><span class="line">368         ListItr(int index) &#123;</span><br><span class="line">369             // index的有效性处理</span><br><span class="line">370             if (index &lt; 0 || index &gt; size)</span><br><span class="line">371                 throw new IndexOutOfBoundsException(&quot;Index: &quot;+index+ &quot;, Size: &quot;+size);</span><br><span class="line">372             // 若 “index 小于 ‘双向链表长度的一半’”，则从第一个元素开始往后查找；</span><br><span class="line">373             // 否则，从最后一个元素往前查找。</span><br><span class="line">374             if (index &lt; (size &gt;&gt; 1)) &#123;</span><br><span class="line">375                 next = header.next;</span><br><span class="line">376                 for (nextIndex=0; nextIndex&lt;index; nextIndex++)</span><br><span class="line">377                     next = next.next;</span><br><span class="line">378             &#125; else &#123;</span><br><span class="line">379                 next = header;</span><br><span class="line">380                 for (nextIndex=size; nextIndex&gt;index; nextIndex--)</span><br><span class="line">381                     next = next.previous;</span><br><span class="line">382             &#125;</span><br><span class="line">383         &#125;</span><br><span class="line">384 </span><br><span class="line">385         // 是否存在下一个元素</span><br><span class="line">386         public boolean hasNext() &#123;</span><br><span class="line">387             // 通过元素索引是否等于“双向链表大小”来判断是否达到最后。</span><br><span class="line">388             return nextIndex != size;</span><br><span class="line">389         &#125;</span><br><span class="line">390 </span><br><span class="line">391         // 获取下一个元素</span><br><span class="line">392         public E next() &#123;</span><br><span class="line">393             checkForComodification();</span><br><span class="line">394             if (nextIndex == size)</span><br><span class="line">395                 throw new NoSuchElementException();</span><br><span class="line">396 </span><br><span class="line">397             lastReturned = next;</span><br><span class="line">398             // next指向链表的下一个元素</span><br><span class="line">399             next = next.next;</span><br><span class="line">400             nextIndex++;</span><br><span class="line">401             return lastReturned.element;</span><br><span class="line">402         &#125;</span><br><span class="line">403 </span><br><span class="line">404         // 是否存在上一个元素</span><br><span class="line">405         public boolean hasPrevious() &#123;</span><br><span class="line">406             // 通过元素索引是否等于0，来判断是否达到开头。</span><br><span class="line">407             return nextIndex != 0;</span><br><span class="line">408         &#125;</span><br><span class="line">409 </span><br><span class="line">410         // 获取上一个元素</span><br><span class="line">411         public E previous() &#123;</span><br><span class="line">412             if (nextIndex == 0)</span><br><span class="line">413             throw new NoSuchElementException();</span><br><span class="line">414 </span><br><span class="line">415             // next指向链表的上一个元素</span><br><span class="line">416             lastReturned = next = next.previous;</span><br><span class="line">417             nextIndex--;</span><br><span class="line">418             checkForComodification();</span><br><span class="line">419             return lastReturned.element;</span><br><span class="line">420         &#125;</span><br><span class="line">421 </span><br><span class="line">422         // 获取下一个元素的索引</span><br><span class="line">423         public int nextIndex() &#123;</span><br><span class="line">424             return nextIndex;</span><br><span class="line">425         &#125;</span><br><span class="line">426 </span><br><span class="line">427         // 获取上一个元素的索引</span><br><span class="line">428         public int previousIndex() &#123;</span><br><span class="line">429             return nextIndex-1;</span><br><span class="line">430         &#125;</span><br><span class="line">431 </span><br><span class="line">432         // 删除当前元素。</span><br><span class="line">433         // 删除双向链表中的当前节点</span><br><span class="line">434         public void remove() &#123;</span><br><span class="line">435             checkForComodification();</span><br><span class="line">436             Entry&lt;E&gt; lastNext = lastReturned.next;</span><br><span class="line">437             try &#123;</span><br><span class="line">438                 LinkedList.this.remove(lastReturned);</span><br><span class="line">439             &#125; catch (NoSuchElementException e) &#123;</span><br><span class="line">440                 throw new IllegalStateException();</span><br><span class="line">441             &#125;</span><br><span class="line">442             if (next==lastReturned)</span><br><span class="line">443                 next = lastNext;</span><br><span class="line">444             else</span><br><span class="line">445                 nextIndex--;</span><br><span class="line">446             lastReturned = header;</span><br><span class="line">447             expectedModCount++;</span><br><span class="line">448         &#125;</span><br><span class="line">449 </span><br><span class="line">450         // 设置当前节点为e</span><br><span class="line">451         public void set(E e) &#123;</span><br><span class="line">452             if (lastReturned == header)</span><br><span class="line">453                 throw new IllegalStateException();</span><br><span class="line">454             checkForComodification();</span><br><span class="line">455             lastReturned.element = e;</span><br><span class="line">456         &#125;</span><br><span class="line">457 </span><br><span class="line">458         // 将e添加到当前节点的前面</span><br><span class="line">459         public void add(E e) &#123;</span><br><span class="line">460             checkForComodification();</span><br><span class="line">461             lastReturned = header;</span><br><span class="line">462             addBefore(e, next);</span><br><span class="line">463             nextIndex++;</span><br><span class="line">464             expectedModCount++;</span><br><span class="line">465         &#125;</span><br><span class="line">466 </span><br><span class="line">467         // 判断 “modCount和expectedModCount是否相等”，依次来实现fail-fast机制。</span><br><span class="line">468         final void checkForComodification() &#123;</span><br><span class="line">469             if (modCount != expectedModCount)</span><br><span class="line">470             throw new ConcurrentModificationException();</span><br><span class="line">471         &#125;</span><br><span class="line">472     &#125;</span><br><span class="line">473 </span><br><span class="line">474     // 双向链表的节点所对应的数据结构。</span><br><span class="line">475     // 包含3部分：上一节点，下一节点，当前节点值。</span><br><span class="line">476     private static class Entry&lt;E&gt; &#123;</span><br><span class="line">477         // 当前节点所包含的值</span><br><span class="line">478         E element;</span><br><span class="line">479         // 下一个节点</span><br><span class="line">480         Entry&lt;E&gt; next;</span><br><span class="line">481         // 上一个节点</span><br><span class="line">482         Entry&lt;E&gt; previous;</span><br><span class="line">483 </span><br><span class="line">484         /**</span><br><span class="line">485          * 链表节点的构造函数。</span><br><span class="line">486          * 参数说明：</span><br><span class="line">487          *   element  —— 节点所包含的数据</span><br><span class="line">488          *   next      —— 下一个节点</span><br><span class="line">489          *   previous —— 上一个节点</span><br><span class="line">490          */</span><br><span class="line">491         Entry(E element, Entry&lt;E&gt; next, Entry&lt;E&gt; previous) &#123;</span><br><span class="line">492             this.element = element;</span><br><span class="line">493             this.next = next;</span><br><span class="line">494             this.previous = previous;</span><br><span class="line">495         &#125;</span><br><span class="line">496     &#125;</span><br><span class="line">497 </span><br><span class="line">498     // 将节点(节点数据是e)添加到entry节点之前。</span><br><span class="line">499     private Entry&lt;E&gt; addBefore(E e, Entry&lt;E&gt; entry) &#123;</span><br><span class="line">500         // 新建节点newEntry，将newEntry插入到节点e之前；并且设置newEntry的数据是e</span><br><span class="line">501         Entry&lt;E&gt; newEntry = new Entry&lt;E&gt;(e, entry, entry.previous);</span><br><span class="line">502         newEntry.previous.next = newEntry;</span><br><span class="line">503         newEntry.next.previous = newEntry;</span><br><span class="line">504         // 修改LinkedList大小</span><br><span class="line">505         size++;</span><br><span class="line">506         // 修改LinkedList的修改统计数：用来实现fail-fast机制。</span><br><span class="line">507         modCount++;</span><br><span class="line">508         return newEntry;</span><br><span class="line">509     &#125;</span><br><span class="line">510 </span><br><span class="line">511     // 将节点从链表中删除</span><br><span class="line">512     private E remove(Entry&lt;E&gt; e) &#123;</span><br><span class="line">513         if (e == header)</span><br><span class="line">514             throw new NoSuchElementException();</span><br><span class="line">515 </span><br><span class="line">516         E result = e.element;</span><br><span class="line">517         e.previous.next = e.next;</span><br><span class="line">518         e.next.previous = e.previous;</span><br><span class="line">519         e.next = e.previous = null;</span><br><span class="line">520         e.element = null;</span><br><span class="line">521         size--;</span><br><span class="line">522         modCount++;</span><br><span class="line">523         return result;</span><br><span class="line">524     &#125;</span><br><span class="line">525 </span><br><span class="line">526     // 反向迭代器</span><br><span class="line">527     public Iterator&lt;E&gt; descendingIterator() &#123;</span><br><span class="line">528         return new DescendingIterator();</span><br><span class="line">529     &#125;</span><br><span class="line">530 </span><br><span class="line">531     // 反向迭代器实现类。</span><br><span class="line">532     private class DescendingIterator implements Iterator &#123;</span><br><span class="line">533         final ListItr itr = new ListItr(size());</span><br><span class="line">534         // 反向迭代器是否下一个元素。</span><br><span class="line">535         // 实际上是判断双向链表的当前节点是否达到开头</span><br><span class="line">536         public boolean hasNext() &#123;</span><br><span class="line">537             return itr.hasPrevious();</span><br><span class="line">538         &#125;</span><br><span class="line">539         // 反向迭代器获取下一个元素。</span><br><span class="line">540         // 实际上是获取双向链表的前一个节点</span><br><span class="line">541         public E next() &#123;</span><br><span class="line">542             return itr.previous();</span><br><span class="line">543         &#125;</span><br><span class="line">544         // 删除当前节点</span><br><span class="line">545         public void remove() &#123;</span><br><span class="line">546             itr.remove();</span><br><span class="line">547         &#125;</span><br><span class="line">548     &#125;</span><br><span class="line">549 </span><br><span class="line">550 </span><br><span class="line">551     // 返回LinkedList的Object[]数组</span><br><span class="line">552     public Object[] toArray() &#123;</span><br><span class="line">553     // 新建Object[]数组</span><br><span class="line">554     Object[] result = new Object[size];</span><br><span class="line">555         int i = 0;</span><br><span class="line">556         // 将链表中所有节点的数据都添加到Object[]数组中</span><br><span class="line">557         for (Entry&lt;E&gt; e = header.next; e != header; e = e.next)</span><br><span class="line">558             result[i++] = e.element;</span><br><span class="line">559     return result;</span><br><span class="line">560     &#125;</span><br><span class="line">561 </span><br><span class="line">562     // 返回LinkedList的模板数组。所谓模板数组，即可以将T设为任意的数据类型</span><br><span class="line">563     public &lt;T&gt; T[] toArray(T[] a) &#123;</span><br><span class="line">564         // 若数组a的大小 &lt; LinkedList的元素个数(意味着数组a不能容纳LinkedList中全部元素)</span><br><span class="line">565         // 则新建一个T[]数组，T[]的大小为LinkedList大小，并将该T[]赋值给a。</span><br><span class="line">566         if (a.length &lt; size)</span><br><span class="line">567             a = (T[])java.lang.reflect.Array.newInstance(</span><br><span class="line">568                                 a.getClass().getComponentType(), size);</span><br><span class="line">569         // 将链表中所有节点的数据都添加到数组a中</span><br><span class="line">570         int i = 0;</span><br><span class="line">571         Object[] result = a;</span><br><span class="line">572         for (Entry&lt;E&gt; e = header.next; e != header; e = e.next)</span><br><span class="line">573             result[i++] = e.element;</span><br><span class="line">574 </span><br><span class="line">575         if (a.length &gt; size)</span><br><span class="line">576             a[size] = null;</span><br><span class="line">577 </span><br><span class="line">578         return a;</span><br><span class="line">579     &#125;</span><br><span class="line">580 </span><br><span class="line">581 </span><br><span class="line">582     // 克隆函数。返回LinkedList的克隆对象。</span><br><span class="line">583     public Object clone() &#123;</span><br><span class="line">584         LinkedList&lt;E&gt; clone = null;</span><br><span class="line">585         // 克隆一个LinkedList克隆对象</span><br><span class="line">586         try &#123;</span><br><span class="line">587             clone = (LinkedList&lt;E&gt;) super.clone();</span><br><span class="line">588         &#125; catch (CloneNotSupportedException e) &#123;</span><br><span class="line">589             throw new InternalError();</span><br><span class="line">590         &#125;</span><br><span class="line">591 </span><br><span class="line">592         // 新建LinkedList表头节点</span><br><span class="line">593         clone.header = new Entry&lt;E&gt;(null, null, null);</span><br><span class="line">594         clone.header.next = clone.header.previous = clone.header;</span><br><span class="line">595         clone.size = 0;</span><br><span class="line">596         clone.modCount = 0;</span><br><span class="line">597 </span><br><span class="line">598         // 将链表中所有节点的数据都添加到克隆对象中</span><br><span class="line">599         for (Entry&lt;E&gt; e = header.next; e != header; e = e.next)</span><br><span class="line">600             clone.add(e.element);</span><br><span class="line">601 </span><br><span class="line">602         return clone;</span><br><span class="line">603     &#125;</span><br><span class="line">604 </span><br><span class="line">605     // java.io.Serializable的写入函数</span><br><span class="line">606     // 将LinkedList的“容量，所有的元素值”都写入到输出流中</span><br><span class="line">607     private void writeObject(java.io.ObjectOutputStream s)</span><br><span class="line">608         throws java.io.IOException &#123;</span><br><span class="line">609         // Write out any hidden serialization magic</span><br><span class="line">610         s.defaultWriteObject();</span><br><span class="line">611 </span><br><span class="line">612         // 写入“容量”</span><br><span class="line">613         s.writeInt(size);</span><br><span class="line">614 </span><br><span class="line">615         // 将链表中所有节点的数据都写入到输出流中</span><br><span class="line">616         for (Entry e = header.next; e != header; e = e.next)</span><br><span class="line">617             s.writeObject(e.element);</span><br><span class="line">618     &#125;</span><br><span class="line">619 </span><br><span class="line">620     // java.io.Serializable的读取函数：根据写入方式反向读出</span><br><span class="line">621     // 先将LinkedList的“容量”读出，然后将“所有的元素值”读出</span><br><span class="line">622     private void readObject(java.io.ObjectInputStream s)</span><br><span class="line">623         throws java.io.IOException, ClassNotFoundException &#123;</span><br><span class="line">624         // Read in any hidden serialization magic</span><br><span class="line">625         s.defaultReadObject();</span><br><span class="line">626 </span><br><span class="line">627         // 从输入流中读取“容量”</span><br><span class="line">628         int size = s.readInt();</span><br><span class="line">629 </span><br><span class="line">630         // 新建链表表头节点</span><br><span class="line">631         header = new Entry&lt;E&gt;(null, null, null);</span><br><span class="line">632         header.next = header.previous = header;</span><br><span class="line">633 </span><br><span class="line">634         // 从输入流中将“所有的元素值”并逐个添加到链表中</span><br><span class="line">635         for (int i=0; i&lt;size; i++)</span><br><span class="line">636             addBefore((E)s.readObject(), header);</span><br><span class="line">637     &#125;</span><br><span class="line">638 </span><br><span class="line">639 &#125;</span><br></pre></td></tr></table></figure>
<p>总结：</p>
<ul>
<li><p>LinkedList实际上是通过双向链表实现的，它包括了一个很重要的内部类：Entry。Entry是双向链表节点所对应的数据结构，它包括的属性有：<strong>当前结点所包含的值，上一个结点，下一个结点</strong>。</p>
</li>
<li><p>LinkedList的实现方式中可以发现，不存在LinkedList容量不足的问题。</p>
</li>
<li><p>LinkedList的克隆函数，将所有的元素克隆到一个新的LinkedList对象中</p>
</li>
<li><p>LinkedList实现java.io.Serializable。当写入到输出流时，先写入容量，再依次写入“每一个节点保护的值“，当读出输入流时，先读取”容量“，再依次读取每一个元素。</p>
</li>
<li><p>LinkedList实现了Deque，Deque接口定义了在双端队列两端访问元素的方法，提供插入，移除和检查元素的方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">       第一个元素（头部）                 最后一个元素（尾部）</span><br><span class="line">        抛出异常        特殊值            抛出异常        特殊值</span><br><span class="line">插入    addFirst(e)    offerFirst(e)    addLast(e)        offerLast(e)</span><br><span class="line">移除    removeFirst()  pollFirst()      removeLast()    pollLast()</span><br><span class="line">检查    getFirst()     peekFirst()      getLast()        peekLast()</span><br></pre></td></tr></table></figure>
</li>
<li><p>LinkedList可以作为FIFO的队列，作为FIFO的队列时，下表的方法等价：</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">队列方法       等效方法</span><br><span class="line">add(e)        addLast(e)</span><br><span class="line">offer(e)      offerLast(e)</span><br><span class="line">remove()      removeFirst()</span><br><span class="line">poll()        pollFirst()</span><br><span class="line">element()     getFirst()</span><br><span class="line">peek()        peekFirst()</span><br></pre></td></tr></table></figure>
<ul>
<li>LinkedList可以作为LIFO的栈，作为LIFO的栈时，下表的方法等价：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">栈方法        等效方法</span><br><span class="line">push(e)      addFirst(e)</span><br><span class="line">pop()        removeFirst()</span><br><span class="line">peek()       peekFirst()</span><br></pre></td></tr></table></figure>
<h2 id="遍历LinkedList的方法"><a href="#遍历LinkedList的方法" class="headerlink" title="遍历LinkedList的方法"></a>遍历LinkedList的方法</h2><ul>
<li>迭代器遍历</li>
<li>快速随机访问遍历LinkedList</li>
<li>通过for循环遍历LinkedList</li>
<li>通过pollFirst()，pollLast()，removeFirst()，removeLast()来遍历LinkedList</li>
</ul>
<p>注意在遍历LinkedList时，使用removeFirst()或removeLast()效率最高。但用它们遍历时，会删除原始数据；若单纯只读取而不删除，应该使用第三种遍历方式。<strong>千万不要使用随机访问去遍历LinkedList</strong>。</p>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/01/10/Mysql索引原理及使用/" rel="next" title="Mysql InnoDB索引原理与使用">
                <i class="fa fa-chevron-left"></i> Mysql InnoDB索引原理与使用
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/01/21/Mysql中的锁/" rel="prev" title="Mysql中的锁">
                Mysql中的锁 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">段铭</p>
              <p class="site-description motion-element" itemprop="description">编程随想</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">18</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              

              
            </nav>
          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#ArrayList详解"><span class="nav-number">1.</span> <span class="nav-text">ArrayList详解</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ArrayList介绍"><span class="nav-number">1.1.</span> <span class="nav-text">ArrayList介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ArrayList内部数据结构"><span class="nav-number">1.2.</span> <span class="nav-text">ArrayList内部数据结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ArrayList源码解析"><span class="nav-number">1.3.</span> <span class="nav-text">ArrayList源码解析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ArrayList的遍历方式"><span class="nav-number">1.4.</span> <span class="nav-text">ArrayList的遍历方式</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#LinkedList详解"><span class="nav-number">2.</span> <span class="nav-text">LinkedList详解</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#LinkedList简介"><span class="nav-number">2.1.</span> <span class="nav-text">LinkedList简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linkedlist的API"><span class="nav-number">2.2.</span> <span class="nav-text">Linkedlist的API</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#LinkedList源码解析"><span class="nav-number">2.3.</span> <span class="nav-text">LinkedList源码解析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#遍历LinkedList的方法"><span class="nav-number">2.4.</span> <span class="nav-text">遍历LinkedList的方法</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">段铭</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v6.7.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=6.7.0"></script>

  <script src="/js/src/motion.js?v=6.7.0"></script>



  
  

  
  <script src="/js/src/scrollspy.js?v=6.7.0"></script>
<script src="/js/src/post-details.js?v=6.7.0"></script>



  


  <script src="/js/src/bootstrap.js?v=6.7.0"></script>



  
  
    
  <script id="dsq-count-scr" src="https://.disqus.com/count.js" async></script>


<script>
  var disqus_config = function () {
    this.page.url = "http://yoursite.com/2019/01/12/ArrayList与LinkedList/";
    this.page.identifier = "2019/01/12/ArrayList与LinkedList/";
    this.page.title = 'ArrayList与LinkedList详解';
    };
  function loadComments () {
    var d = document, s = d.createElement('script');
    s.src = 'https://.disqus.com/embed.js';
    s.setAttribute('data-timestamp', '' + +new Date());
    (d.head || d.body).appendChild(s);
  }
  
    loadComments();
  
</script>

  





  





  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
